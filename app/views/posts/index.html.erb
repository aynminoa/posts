<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PostsApp</title>
  </head>
  <body>
    <div class="container">
      <header>
        <%= image_tag "free_megaphone.png" %>
        <p class='header-title'>ホーム</p>
      </header>
    
      <div class='main'>
        <%= form_with(model: @post, local: true) do |form| %>
        
        <% if @post.errors.any? %>
            <div id="error_explanation">
              <h2><%= @post.errors.count %>件のエラーがあります。</h2>
              <ul>
        
              <% @post.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
              <% end %>
              </ul>
            </div>
          <% end %>
          
          <div class="post-entry">
            <%= form.text_field :content %>
          </div>
          <div class="post-btn">
            <%= form.submit "ツイート"%>
          </div>
        <% end %>
        
        <div class="post-list">
          <h1 class="post-list-title">一覧</h1>
          <table>
          <% @posts.each do |post| %>
            <tr>
              <td><%= post.content %></td>
              <td class="change"><%= link_to "編集", edit_post_path(post.id) %></td>
              <td class="change"><%= link_to "削除", post_path(post.id), method: :delete %></td>
            </tr>
          <% end %>
          </table>
        </div>
      </div> 
    
      <footer>
        <p class="copyright">Copyright ©posts All RIGHTS RESERVED.</p>
      </footer>
    </div>
  </body>
</html>

